/*! For license information please see 27.7af2b9e3.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkreact_map_components_maplibre_lab=self.webpackChunkreact_map_components_maplibre_lab||[]).push([[27],{274511:(t,e,n)=>{"use strict";function r(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function i(t){return t instanceof r(t).Element||t instanceof Element}function o(t){return t instanceof r(t).HTMLElement||t instanceof HTMLElement}function s(t){return"undefined"!=typeof ShadowRoot&&(t instanceof r(t).ShadowRoot||t instanceof ShadowRoot)}n.d(e,{fi:()=>ft});var a=Math.max,l=Math.min,u=Math.round;function f(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function c(){return!/^((?!chrome|android).)*safari/i.test(f())}function h(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var s=t.getBoundingClientRect(),a=1,l=1;e&&o(t)&&(a=t.offsetWidth>0&&u(s.width)/t.offsetWidth||1,l=t.offsetHeight>0&&u(s.height)/t.offsetHeight||1);var f=(i(t)?r(t):window).visualViewport,h=!c()&&n,p=(s.left+(h&&f?f.offsetLeft:0))/a,d=(s.top+(h&&f?f.offsetTop:0))/l,g=s.width/a,m=s.height/l;return{width:g,height:m,top:d,right:p+g,bottom:d+m,left:p,x:p,y:d}}function p(t){var e=r(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function d(t){return t?(t.nodeName||"").toLowerCase():null}function g(t){return((i(t)?t.ownerDocument:t.document)||window.document).documentElement}function m(t){return h(g(t)).left+p(t).scrollLeft}function v(t){return r(t).getComputedStyle(t)}function y(t){var e=v(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function x(t,e,n){void 0===n&&(n=!1);var i,s,a=o(e),l=o(e)&&function(t){var e=t.getBoundingClientRect(),n=u(e.width)/t.offsetWidth||1,r=u(e.height)/t.offsetHeight||1;return 1!==n||1!==r}(e),f=g(e),c=h(t,l,n),v={scrollLeft:0,scrollTop:0},x={x:0,y:0};return(a||!a&&!n)&&(("body"!==d(e)||y(f))&&(v=(i=e)!==r(i)&&o(i)?{scrollLeft:(s=i).scrollLeft,scrollTop:s.scrollTop}:p(i)),o(e)?((x=h(e,!0)).x+=e.clientLeft,x.y+=e.clientTop):f&&(x.x=m(f))),{x:c.left+v.scrollLeft-x.x,y:c.top+v.scrollTop-x.y,width:c.width,height:c.height}}function b(t){var e=h(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function w(t){return"html"===d(t)?t:t.assignedSlot||t.parentNode||(s(t)?t.host:null)||g(t)}function E(t){return["html","body","#document"].indexOf(d(t))>=0?t.ownerDocument.body:o(t)&&y(t)?t:E(w(t))}function _(t,e){var n;void 0===e&&(e=[]);var i=E(t),o=i===(null==(n=t.ownerDocument)?void 0:n.body),s=r(i),a=o?[s].concat(s.visualViewport||[],y(i)?i:[]):i,l=e.concat(a);return o?l:l.concat(_(w(a)))}function S(t){return["table","td","th"].indexOf(d(t))>=0}function k(t){return o(t)&&"fixed"!==v(t).position?t.offsetParent:null}function O(t){for(var e=r(t),n=k(t);n&&S(n)&&"static"===v(n).position;)n=k(n);return n&&("html"===d(n)||"body"===d(n)&&"static"===v(n).position)?e:n||function(t){var e=/firefox/i.test(f());if(/Trident/i.test(f())&&o(t)&&"fixed"===v(t).position)return null;var n=w(t);for(s(n)&&(n=n.host);o(n)&&["html","body"].indexOf(d(n))<0;){var r=v(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||e&&"filter"===r.willChange||e&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(t)||e}var L="top",T="bottom",P="right",R="left",I="auto",A=[L,T,P,R],M="start",j="end",C="viewport",N="popper",B=A.reduce((function(t,e){return t.concat([e+"-"+M,e+"-"+j])}),[]),F=[].concat(A,[I]).reduce((function(t,e){return t.concat([e,e+"-"+M,e+"-"+j])}),[]),W=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function D(t){var e=new Map,n=new Set,r=[];function i(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var r=e.get(t);r&&i(r)}})),r.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||i(t)})),r}var z={placement:"bottom",modifiers:[],strategy:"absolute"};function G(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function H(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,r=void 0===n?[]:n,o=e.defaultOptions,s=void 0===o?z:o;return function(t,e,n){void 0===n&&(n=s);var o,a,l={placement:"bottom",orderedModifiers:[],options:Object.assign({},z,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},u=[],f=!1,c={state:l,setOptions:function(n){var o="function"==typeof n?n(l.options):n;h(),l.options=Object.assign({},s,l.options,o),l.scrollParents={reference:i(t)?_(t):t.contextElement?_(t.contextElement):[],popper:_(e)};var a,f,p=function(t){var e=D(t);return W.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((a=[].concat(r,l.options.modifiers),f=a.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(f).map((function(t){return f[t]}))));return l.orderedModifiers=p.filter((function(t){return t.enabled})),l.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,r=void 0===n?{}:n,i=t.effect;if("function"==typeof i){var o=i({state:l,name:e,instance:c,options:r});u.push(o||function(){})}})),c.update()},forceUpdate:function(){if(!f){var t=l.elements,e=t.reference,n=t.popper;if(G(e,n)){l.rects={reference:x(e,O(n),"fixed"===l.options.strategy),popper:b(n)},l.reset=!1,l.placement=l.options.placement,l.orderedModifiers.forEach((function(t){return l.modifiersData[t.name]=Object.assign({},t.data)}));for(var r=0;r<l.orderedModifiers.length;r++)if(!0!==l.reset){var i=l.orderedModifiers[r],o=i.fn,s=i.options,a=void 0===s?{}:s,u=i.name;"function"==typeof o&&(l=o({state:l,options:a,name:u,instance:c})||l)}else l.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(t){c.forceUpdate(),t(l)}))},function(){return a||(a=new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(o())}))}))),a}),destroy:function(){h(),f=!0}};if(!G(t,e))return c;function h(){u.forEach((function(t){return t()})),u=[]}return c.setOptions(n).then((function(t){!f&&n.onFirstUpdate&&n.onFirstUpdate(t)})),c}}var Z={passive:!0};function $(t){return t.split("-")[0]}function q(t){return t.split("-")[1]}function V(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function U(t){var e,n=t.reference,r=t.element,i=t.placement,o=i?$(i):null,s=i?q(i):null,a=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(o){case L:e={x:a,y:n.y-r.height};break;case T:e={x:a,y:n.y+n.height};break;case P:e={x:n.x+n.width,y:l};break;case R:e={x:n.x-r.width,y:l};break;default:e={x:n.x,y:n.y}}var u=o?V(o):null;if(null!=u){var f="y"===u?"height":"width";switch(s){case M:e[u]=e[u]-(n[f]/2-r[f]/2);break;case j:e[u]=e[u]+(n[f]/2-r[f]/2)}}return e}var Y={top:"auto",right:"auto",bottom:"auto",left:"auto"};function X(t){var e,n=t.popper,i=t.popperRect,o=t.placement,s=t.variation,a=t.offsets,l=t.position,f=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,p=t.isFixed,d=a.x,m=void 0===d?0:d,y=a.y,x=void 0===y?0:y,b="function"==typeof h?h({x:m,y:x}):{x:m,y:x};m=b.x,x=b.y;var w=a.hasOwnProperty("x"),E=a.hasOwnProperty("y"),_=R,S=L,k=window;if(c){var I=O(n),A="clientHeight",M="clientWidth";I===r(n)&&"static"!==v(I=g(n)).position&&"absolute"===l&&(A="scrollHeight",M="scrollWidth"),(o===L||(o===R||o===P)&&s===j)&&(S=T,x-=(p&&I===k&&k.visualViewport?k.visualViewport.height:I[A])-i.height,x*=f?1:-1),o!==R&&(o!==L&&o!==T||s!==j)||(_=P,m-=(p&&I===k&&k.visualViewport?k.visualViewport.width:I[M])-i.width,m*=f?1:-1)}var C,N=Object.assign({position:l},c&&Y),B=!0===h?function(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:u(n*i)/i||0,y:u(r*i)/i||0}}({x:m,y:x},r(n)):{x:m,y:x};return m=B.x,x=B.y,f?Object.assign({},N,((C={})[S]=E?"0":"",C[_]=w?"0":"",C.transform=(k.devicePixelRatio||1)<=1?"translate("+m+"px, "+x+"px)":"translate3d("+m+"px, "+x+"px, 0)",C)):Object.assign({},N,((e={})[S]=E?x+"px":"",e[_]=w?m+"px":"",e.transform="",e))}var K={left:"right",right:"left",bottom:"top",top:"bottom"};function J(t){return t.replace(/left|right|bottom|top/g,(function(t){return K[t]}))}var Q={start:"end",end:"start"};function tt(t){return t.replace(/start|end/g,(function(t){return Q[t]}))}function et(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&s(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function nt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function rt(t,e,n){return e===C?nt(function(t,e){var n=r(t),i=g(t),o=n.visualViewport,s=i.clientWidth,a=i.clientHeight,l=0,u=0;if(o){s=o.width,a=o.height;var f=c();(f||!f&&"fixed"===e)&&(l=o.offsetLeft,u=o.offsetTop)}return{width:s,height:a,x:l+m(t),y:u}}(t,n)):i(e)?function(t,e){var n=h(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):nt(function(t){var e,n=g(t),r=p(t),i=null==(e=t.ownerDocument)?void 0:e.body,o=a(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=a(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+m(t),u=-r.scrollTop;return"rtl"===v(i||n).direction&&(l+=a(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:l,y:u}}(g(t)))}function it(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function ot(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}function st(t,e){void 0===e&&(e={});var n=e,r=n.placement,s=void 0===r?t.placement:r,u=n.strategy,f=void 0===u?t.strategy:u,c=n.boundary,p=void 0===c?"clippingParents":c,m=n.rootBoundary,y=void 0===m?C:m,x=n.elementContext,b=void 0===x?N:x,E=n.altBoundary,S=void 0!==E&&E,k=n.padding,R=void 0===k?0:k,I=it("number"!=typeof R?R:ot(R,A)),M=b===N?"reference":N,j=t.rects.popper,B=t.elements[S?M:b],F=function(t,e,n,r){var s="clippingParents"===e?function(t){var e=_(w(t)),n=["absolute","fixed"].indexOf(v(t).position)>=0&&o(t)?O(t):t;return i(n)?e.filter((function(t){return i(t)&&et(t,n)&&"body"!==d(t)})):[]}(t):[].concat(e),u=[].concat(s,[n]),f=u[0],c=u.reduce((function(e,n){var i=rt(t,n,r);return e.top=a(i.top,e.top),e.right=l(i.right,e.right),e.bottom=l(i.bottom,e.bottom),e.left=a(i.left,e.left),e}),rt(t,f,r));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}(i(B)?B:B.contextElement||g(t.elements.popper),p,y,f),W=h(t.elements.reference),D=U({reference:W,element:j,strategy:"absolute",placement:s}),z=nt(Object.assign({},j,D)),G=b===N?z:W,H={top:F.top-G.top+I.top,bottom:G.bottom-F.bottom+I.bottom,left:F.left-G.left+I.left,right:G.right-F.right+I.right},Z=t.modifiersData.offset;if(b===N&&Z){var $=Z[s];Object.keys(H).forEach((function(t){var e=[P,T].indexOf(t)>=0?1:-1,n=[L,T].indexOf(t)>=0?"y":"x";H[t]+=$[n]*e}))}return H}function at(t,e,n){return a(t,l(e,n))}function lt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function ut(t){return[L,P,T,R].some((function(e){return t[e]>=0}))}var ft=H({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,o=i.scroll,s=void 0===o||o,a=i.resize,l=void 0===a||a,u=r(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&f.forEach((function(t){t.addEventListener("scroll",n.update,Z)})),l&&u.addEventListener("resize",n.update,Z),function(){s&&f.forEach((function(t){t.removeEventListener("scroll",n.update,Z)})),l&&u.removeEventListener("resize",n.update,Z)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=U({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=void 0===r||r,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,u={placement:$(e.placement),variation:q(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,X(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,X(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},i=e.elements[t];o(i)&&d(i)&&(Object.assign(i.style,n),Object.keys(r).forEach((function(t){var e=r[t];!1===e?i.removeAttribute(t):i.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var r=e.elements[t],i=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});o(r)&&d(r)&&(Object.assign(r.style,s),Object.keys(i).forEach((function(t){r.removeAttribute(t)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.offset,o=void 0===i?[0,0]:i,s=F.reduce((function(t,n){return t[n]=function(t,e,n){var r=$(t),i=[R,L].indexOf(r)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[R,P].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}(n,e.rects,o),t}),{}),a=s[e.placement],l=a.x,u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=s}},{name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,o=void 0===i||i,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,u=n.padding,f=n.boundary,c=n.rootBoundary,h=n.altBoundary,p=n.flipVariations,d=void 0===p||p,g=n.allowedAutoPlacements,m=e.options.placement,v=$(m),y=l||(v!==m&&d?function(t){if($(t)===I)return[];var e=J(t);return[tt(t),e,tt(e)]}(m):[J(m)]),x=[m].concat(y).reduce((function(t,n){return t.concat($(n)===I?function(t,e){void 0===e&&(e={});var n=e,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=void 0===l?F:l,f=q(r),c=f?a?B:B.filter((function(t){return q(t)===f})):A,h=c.filter((function(t){return u.indexOf(t)>=0}));0===h.length&&(h=c);var p=h.reduce((function(e,n){return e[n]=st(t,{placement:n,boundary:i,rootBoundary:o,padding:s})[$(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:f,rootBoundary:c,padding:u,flipVariations:d,allowedAutoPlacements:g}):n)}),[]),b=e.rects.reference,w=e.rects.popper,E=new Map,_=!0,S=x[0],k=0;k<x.length;k++){var O=x[k],j=$(O),C=q(O)===M,N=[L,T].indexOf(j)>=0,W=N?"width":"height",D=st(e,{placement:O,boundary:f,rootBoundary:c,altBoundary:h,padding:u}),z=N?C?P:R:C?T:L;b[W]>w[W]&&(z=J(z));var G=J(z),H=[];if(o&&H.push(D[j]<=0),a&&H.push(D[z]<=0,D[G]<=0),H.every((function(t){return t}))){S=O,_=!1;break}E.set(O,H)}if(_)for(var Z=function(t){var e=x.find((function(e){var n=E.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return S=e,"break"},V=d?3:1;V>0&&"break"!==Z(V);V--);e.placement!==S&&(e.modifiersData[r]._skip=!0,e.placement=S,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,o=void 0===i||i,s=n.altAxis,u=void 0!==s&&s,f=n.boundary,c=n.rootBoundary,h=n.altBoundary,p=n.padding,d=n.tether,g=void 0===d||d,m=n.tetherOffset,v=void 0===m?0:m,y=st(e,{boundary:f,rootBoundary:c,padding:p,altBoundary:h}),x=$(e.placement),w=q(e.placement),E=!w,_=V(x),S="x"===_?"y":"x",k=e.modifiersData.popperOffsets,I=e.rects.reference,A=e.rects.popper,j="function"==typeof v?v(Object.assign({},e.rects,{placement:e.placement})):v,C="number"==typeof j?{mainAxis:j,altAxis:j}:Object.assign({mainAxis:0,altAxis:0},j),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if(k){if(o){var F,W="y"===_?L:R,D="y"===_?T:P,z="y"===_?"height":"width",G=k[_],H=G+y[W],Z=G-y[D],U=g?-A[z]/2:0,Y=w===M?I[z]:A[z],X=w===M?-A[z]:-I[z],K=e.elements.arrow,J=g&&K?b(K):{width:0,height:0},Q=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},tt=Q[W],et=Q[D],nt=at(0,I[z],J[z]),rt=E?I[z]/2-U-nt-tt-C.mainAxis:Y-nt-tt-C.mainAxis,it=E?-I[z]/2+U+nt+et+C.mainAxis:X+nt+et+C.mainAxis,ot=e.elements.arrow&&O(e.elements.arrow),lt=ot?"y"===_?ot.clientTop||0:ot.clientLeft||0:0,ut=null!=(F=null==N?void 0:N[_])?F:0,ft=G+it-ut,ct=at(g?l(H,G+rt-ut-lt):H,G,g?a(Z,ft):Z);k[_]=ct,B[_]=ct-G}if(u){var ht,pt="x"===_?L:R,dt="x"===_?T:P,gt=k[S],mt="y"===S?"height":"width",vt=gt+y[pt],yt=gt-y[dt],xt=-1!==[L,R].indexOf(x),bt=null!=(ht=null==N?void 0:N[S])?ht:0,wt=xt?vt:gt-I[mt]-A[mt]-bt+C.altAxis,Et=xt?gt+I[mt]+A[mt]-bt-C.altAxis:yt,_t=g&&xt?function(t,e,n){var r=at(t,e,n);return r>n?n:r}(wt,gt,Et):at(g?wt:vt,gt,g?Et:yt);k[S]=_t,B[S]=_t-gt}e.modifiersData[r]=B}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,r=t.name,i=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=$(n.placement),l=V(a),u=[R,P].indexOf(a)>=0?"height":"width";if(o&&s){var f=function(t,e){return it("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:ot(t,A))}(i.padding,n),c=b(o),h="y"===l?L:R,p="y"===l?T:P,d=n.rects.reference[u]+n.rects.reference[l]-s[l]-n.rects.popper[u],g=s[l]-n.rects.reference[l],m=O(o),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,y=d/2-g/2,x=f[h],w=v-c[u]-f[p],E=v/2-c[u]/2+y,_=at(x,E,w),S=l;n.modifiersData[r]=((e={})[S]=_,e.centerOffset=_-E,e)}},effect:function(t){var e=t.state,n=t.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=e.elements.popper.querySelector(r)))&&et(e.elements.popper,r)&&(e.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=st(e,{elementContext:"reference"}),a=st(e,{altBoundary:!0}),l=lt(s,r),u=lt(a,i,o),f=ut(l),c=ut(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:f,hasPopperEscaped:c},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":f,"data-popper-escaped":c})}}]})},203485:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(693370),i=n(62363);const o=globalThis;function s(t){if(!t&&!(0,r.Z)())return"Node";if((0,i.Z)(t))return"Electron";const e="undefined"!=typeof navigator?navigator:{},n=t||e.userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const s=-1!==n.indexOf("MSIE "),a=-1!==n.indexOf("Trident/");return s||a?"IE":o.chrome?"Chrome":o.safari?"Safari":o.mozInnerScreenX?"Firefox":"Unknown"}},693370:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(62363),i=n(734155);function o(){return!("object"==typeof i&&"[object process]"===String(i)&&!i.browser)||(0,r.Z)()}},62363:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(734155);function i(t){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if(void 0!==r&&"object"==typeof r.versions&&Boolean(r.versions.electron))return!0;const e="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}},559109:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r=n(204942),i=n(693370);const o="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";(0,i.Z)();class s{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";(0,r.Z)(this,"storage",void 0),(0,r.Z)(this,"id",void 0),(0,r.Z)(this,"config",void 0),this.storage=function(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch(t){return null}}(n),this.id=t,this.config=e,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){if(Object.assign(this.config,t),this.storage){const t=JSON.stringify(this.config);this.storage.setItem(this.id,t)}}_loadConfiguration(){let t={};if(this.storage){const e=this.storage.getItem(this.id);t=e?JSON.parse(e):{}}return Object.assign(this.config,t),this}}function a(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const o=t.width*n,s=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(s/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(s,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(s,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let l;function u(t){return"string"==typeof t?l[t.toUpperCase()]||l.WHITE:t}function f(t,e){if(!t)throw new Error(e||"Assertion failed")}!function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(l||(l={}));var c=n(734155);const h={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:void 0!==n.g&&n.g,document:"undefined"!=typeof document&&document,process:"object"==typeof c&&c},p=h.window||h.self||h.global,d=h.process||{};function g(){let t;var e,n;if(i.Z&&"performance"in p)t=null==p||null===(e=p.performance)||void 0===e||null===(n=e.now)||void 0===n?void 0:n.call(e);else if("hrtime"in d){var r;const e=null==d||null===(r=d.hrtime)||void 0===r?void 0:r.call(d);t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}const m={debug:i.Z&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},v={enabled:!0,level:0};function y(){}const x={},b={once:!0};class w{constructor(){let{id:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};(0,r.Z)(this,"id",void 0),(0,r.Z)(this,"VERSION",o),(0,r.Z)(this,"_startTs",g()),(0,r.Z)(this,"_deltaTs",g()),(0,r.Z)(this,"_storage",void 0),(0,r.Z)(this,"userData",{}),(0,r.Z)(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this.userData={},this._storage=new s("__probe-".concat(this.id,"__"),v),this.timeStamp("".concat(this.id," started")),function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const n of r)"function"==typeof t[n]&&(e.find((t=>n===t))||(t[n]=t[n].bind(t)))}(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((g()-this._startTs).toPrecision(10))}getDelta(){return Number((g()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.setConfiguration({enabled:t}),this}setLevel(t){return this._storage.setConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,e){this._storage.setConfiguration({[t]:e})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,e){f(t,e)}warn(t){return this._getLogFunction(0,t,m.warn,arguments,b)}error(t){return this._getLogFunction(0,t,m.error,arguments)}deprecated(t,e){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(e,"` instead"))}removed(t,e){return this.error("`".concat(t,"` has been removed. Use `").concat(e,"` instead"))}probe(t,e){return this._getLogFunction(t,e,m.log,arguments,{time:!0,once:!0})}log(t,e){return this._getLogFunction(t,e,m.debug,arguments)}info(t,e){return this._getLogFunction(t,e,console.info,arguments)}once(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return this._getLogFunction(t,e,m.debug||m.info,arguments,b)}table(t,e,n){return e?this._getLogFunction(t,e,console.table||y,n&&[n],{tag:S(e)}):y}image(t){let{logLevel:e,priority:n,image:r,message:o="",scale:s=1}=t;return this._shouldLog(e||n)?i.Z?function(t){let{image:e,message:n="",scale:r=1}=t;if("string"==typeof e){const t=new Image;return t.onload=()=>{const e=a(t,n,r);console.log(...e)},t.src=e,y}const i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...a(e,n,r)),y;if("canvas"===i.toLowerCase()){const t=new Image;return t.onload=()=>console.log(...a(t,n,r)),t.src=e.toDataURL(),y}return y}({image:r,message:o,scale:s}):function(t){let{image:e,message:n="",scale:r=1}=t;return console.warn("removed"),y}({image:r,message:o,scale:s}):y}time(t,e){return this._getLogFunction(t,e,console.time?console.time:console.info)}timeEnd(t,e){return this._getLogFunction(t,e,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,e){return this._getLogFunction(t,e,console.timeStamp||y)}group(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const r=_({logLevel:t,message:e,opts:n}),{collapsed:i}=n;return r.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(t,e,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||y)}withGroup(t,e,n){this.group(t,e)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=E(t)}_getLogFunction(t,e,n,r,o){if(this._shouldLog(t)){o=_({logLevel:t,message:e,args:r,opts:o}),f(n=n||o.method),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=g();const s=o.tag||o.message;if(o.once){if(x[s])return y;x[s]=g()}return e=function(t,e,n){if("string"==typeof e){const a=n.time?function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}(function(t){let e;return e=t<10?"".concat(t.toFixed(2),"ms"):t<100?"".concat(t.toFixed(1),"ms"):t<1e3?"".concat(t.toFixed(0),"ms"):"".concat((t/1e3).toFixed(2),"s"),e}(n.total)):"";r=e=n.time?"".concat(t,": ").concat(a,"  ").concat(e):"".concat(t,": ").concat(e),o=n.color,s=n.background,i.Z||"string"!=typeof r||(o&&(o=u(o),r="[".concat(o,"m").concat(r,"[39m")),s&&(o=u(s),r="[".concat(s+10,"m").concat(r,"[49m"))),e=r}var r,o,s;return e}(this.id,o.message,o),n.bind(console,e,...o.args)}return y}}function E(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return f(Number.isFinite(e)&&e>=0),e}function _(t){const{logLevel:e,message:n}=t;t.logLevel=E(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":void 0!==n&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e)}"function"==typeof t.message&&(t.message=t.message());const i=typeof t.message;return f("string"===i||"object"===i),Object.assign(t,{args:r},t.opts)}function S(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}(0,r.Z)(w,"VERSION",o)},626203:(t,e,n)=>{"use strict";n.d(e,{jk:()=>a});var r=n(204942),i=n(734155);function o(){let t;if("undefined"!=typeof window&&window.performance)t=window.performance.now();else if(void 0!==i&&i.hrtime){const e=i.hrtime();t=1e3*e[0]+e[1]/1e6}else t=Date.now();return t}class s{constructor(t,e){(0,r.Z)(this,"name",void 0),(0,r.Z)(this,"type",void 0),(0,r.Z)(this,"sampleSize",1),(0,r.Z)(this,"time",void 0),(0,r.Z)(this,"count",void 0),(0,r.Z)(this,"samples",void 0),(0,r.Z)(this,"lastTiming",void 0),(0,r.Z)(this,"lastSampleTime",void 0),(0,r.Z)(this,"lastSampleCount",void 0),(0,r.Z)(this,"_count",0),(0,r.Z)(this,"_time",0),(0,r.Z)(this,"_samples",0),(0,r.Z)(this,"_startTime",0),(0,r.Z)(this,"_timerPending",!1),this.name=t,this.type=e,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=o(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(o()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class a{constructor(t){(0,r.Z)(this,"id",void 0),(0,r.Z)(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach((e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}_initializeStats(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach((t=>this._getOrCreate(t)))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:n}=t;return this.stats[e]||(this.stats[e]=t instanceof s?t:new s(e,n)),this.stats[e]}}},54188:(t,e,n)=>{const{Node:r,Way:i,Relation:o}=n(92426),{purgeProps:s,RefElements:a}=n(127465),l=n(249800);t.exports=(t,e)=>{let n=!1,u=!1,f=!0;(t=>{if(t){n=!(!t.completeFeature&&!t.allFeatures),u=!!t.renderTagged;let e=t.suppressWay||t.excludeWay;void 0===e||e||(f=!1)}})(e);let c=(t=>t.elements?"json":t.indexOf("<osm")>=0?"xml":t.trim().startsWith("{")?"json-raw":"invalid")(t),h=new a,p=[];"json-raw"===c&&(c=(t=JSON.parse(t)).elements?"json":"invalid"),"json"===c?(t=>{for(let e of t.elements)switch(e.type){case"node":let t=new r(e.id,h);e.tags&&t.addTags(e.tags),t.addProps(s(e,["id","type","tags","lat","lon"])),t.setLatLng(e);break;case"way":let n=new i(e.id,h);if(e.tags&&n.addTags(e.tags),n.addProps(s(e,["id","type","tags","nodes","geometry"])),e.nodes)for(let t of e.nodes)n.addNodeRef(t);else e.geometry&&n.setLatLngArray(e.geometry);break;case"relation":let a=new o(e.id,h);if(e.bounds&&a.setBounds([parseFloat(e.bounds.minlon),parseFloat(e.bounds.minlat),parseFloat(e.bounds.maxlon),parseFloat(e.bounds.maxlat)]),e.tags&&a.addTags(e.tags),a.addProps(s(e,["id","type","tags","bounds","members"])),e.members)for(let t of e.members)a.addMember(t)}})(t):"xml"===c&&(t=>{const e=new l({progressive:!0});e.on("</osm.node>",(t=>{let e=new r(t.id,h);for(let[n,r]of Object.entries(t))!n.startsWith("$")&&["id","lon","lat"].indexOf(n)<0&&e.addProp(n,r);if(e.setLatLng(t),t.$innerNodes)for(let n of t.$innerNodes)"tag"===n.$tag&&e.addTag(n.k,n.v)})),e.on("</osm.way>",(t=>{let e=new i(t.id,h);for(let[n,r]of Object.entries(t))!n.startsWith("$")&&["id"].indexOf(n)<0&&e.addProp(n,r);if(t.$innerNodes)for(let n of t.$innerNodes)"nd"===n.$tag?n.lon&&n.lat?e.addLatLng(n):n.ref&&e.addNodeRef(n.ref):"tag"===n.$tag&&e.addTag(n.k,n.v)})),e.on("<osm.relation>",(t=>{new o(t.id,h)})),e.on("</osm.relation.member>",((t,e)=>{let n=h.get(`relation/${e.id}`),r={type:t.type,role:t.role?t.role:"",ref:t.ref};if(t.lat&&t.lon){r.lat=t.lat,r.lon=t.lon,r.tags={};for(let[e,n]of Object.entries(t))!e.startsWith("$")&&["type","lat","lon"].indexOf(e)<0&&(r[e]=n)}if(t.$innerNodes){let e=[],n=[];for(let r of t.$innerNodes)r.lat&&r.lon?e.push(r):n.push(r.ref);e.length>0?r.geometry=e:n.length>0&&(r.nodes=n)}n.addMember(r)})),e.on("</osm.relation.bounds>",((t,e)=>{h.get(`relation/${e.id}`).setBounds([parseFloat(t.minlon),parseFloat(t.minlat),parseFloat(t.maxlon),parseFloat(t.maxlat)])})),e.on("</osm.relation.tag>",((t,e)=>{h.get(`relation/${e.id}`).addTag(t.k,t.v)})),e.parse(t)})(t),h.bindAll();for(let t of h.values())if(t.refCount<=0||t.hasTag&&u&&!(t instanceof i&&f)){let e=t.toFeatureArray();if(t instanceof o&&!n&&e.length>0)return e[0].geometry;p=p.concat(e)}return{type:"FeatureCollection",features:p}}},92426:(t,e,n)=>{t.exports=(()=>{"use strict";const{first:t,last:e,coordsToKey:r,addToMap:i,removeFromMap:o,getFirstFromMap:s,isRing:a,ringDirection:l,ptInsidePolygon:u,strToFloat:f,LateBinder:c,WayCollection:h}=n(127465),p=n(110221);class d{constructor(t,e,n){this.type=t,this.id=e,this.refElems=n,this.tags={},this.props={id:this.getCompositeId()},this.refCount=0,this.hasTag=!1,n&&n.add(this.getCompositeId(),this)}addTags(t){this.tags=Object.assign(this.tags,t),this.hasTag=!!t}addTag(t,e){this.tags[t]=e,this.hasTag=!!t}addProp(t,e){this.props[t]=e}addProps(t){this.props=Object.assign(this.props,t)}getCompositeId(){return`${this.type}/${this.id}`}getProps(){return Object.assign(this.props,this.tags)}toFeatureArray(){return[]}}class g extends d{constructor(t,e){super("node",t,e),this.latLng=null}setLatLng(t){this.latLng=t}toFeatureArray(){return this.latLng?[{type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"Point",coordinates:f([this.latLng.lon,this.latLng.lat])}}]:[]}getLatLng(){return this.latLng}}class m extends d{constructor(t,e){super("way",t,e),this.latLngArray=[],this.isPolygon=!1}addLatLng(t){this.latLngArray.push(t)}setLatLngArray(t){this.latLngArray=t}addNodeRef(t){let e=new c(this.latLngArray,(function(t){let e=this.refElems.get(`node/${t}`);if(e)return e.refCount++,e.getLatLng()}),this,[t]);this.latLngArray.push(e),this.refElems.addBinder(e)}analyzeGeometryType(t,e){let n=p[t];n&&(this.isPolygon=!0,n.whitelist?this.isPolygon=n.whitelist.indexOf(e)>=0:n.blacklist&&(this.isPolygon=!(n.blacklist.indexOf(e)>=0)))}addTags(t){super.addTags(t);for(let[e,n]of Object.entries(t))this.analyzeGeometryType(e,n)}addTag(t,e){super.addTag(t,e),this.analyzeGeometryType(t,e)}toCoordsArray(){return this.latLngArray.map((t=>[t.lon,t.lat]))}toFeatureArray(){let t=this.toCoordsArray();if(t.length>1){t=f(t);let e={type:"Feature",id:this.getCompositeId(),properties:this.getProps(),geometry:{type:"LineString",coordinates:t}};return this.isPolygon&&a(t)?("counterclockwise"!==l(t)&&t.reverse(),e.geometry={type:"Polygon",coordinates:[t]},[e]):[e]}return[]}}return{Node:g,Way:m,Relation:class extends d{constructor(t,e){super("relation",t,e),this.relations=[],this.nodes=[],this.bounds=null}setBounds(t){this.bounds=t}addMember(t){switch(t.type){case"relation":let e=new c(this.relations,(function(t){let e=this.refElems.get(`relation/${t}`);if(e)return e.refCount++,e}),this,[t.ref]);this.relations.push(e),this.refElems.addBinder(e);break;case"way":t.role||(t.role="");let n=this[t.role];if(n||(n=this[t.role]=[]),t.geometry){let e=new m(t.ref,this.refElems);e.setLatLngArray(t.geometry),e.refCount++,n.push(e)}else if(t.nodes){let e=new m(t.ref,this.refElems);for(let n of t.nodes)e.addNodeRef(n);e.refCount++,n.push(e)}else{let e=new c(n,(function(t){let e=this.refElems.get(`way/${t}`);if(e)return e.refCount++,e}),this,[t.ref]);n.push(e),this.refElems.addBinder(e)}break;case"node":let r=null;if(t.lat&&t.lon){r=new g(t.ref,this.refElems),r.setLatLng({lon:t.lon,lat:t.lat}),t.tags&&r.addTags(t.tags);for(let[e,n]of Object.entries(t))["id","type","lat","lon"].indexOf(e)<0&&r.addProp(e,n);r.refCount++,this.nodes.push(r)}else{let e=new c(this.nodes,(function(t){let e=this.refElems.get(`node/${t}`);if(e)return e.refCount++,e}),this,[t.ref]);this.nodes.push(e),this.refElems.addBinder(e)}}}toFeatureArray(){let e=[],n=[],r=[];const i=["outer","inner",""];for(let t of this.relations)if(t)for(let e of i){let n=t[e];if(n){let t=this[e];t?[].splice.apply(t,[t.length,0].concat(n)):this[e]=n}}for(let t of i){let e=this[t];if(e){this[t]=new h;for(let n of e)this[t].addWay(n)}}let o=null,s={type:"Feature",id:this.getCompositeId(),bbox:this.bounds,properties:this.getProps()};this.bounds||delete s.bbox,this.outer?(o=((e,n)=>{let r=e?e.toRings("counterclockwise"):[],i=n?n.toRings("clockwise"):[];if(r.length>0){let e=[],n=null;for(n of r)e.push([n]);for(;n=i.shift();)for(let i in r)if(u(t(n),r[i])){e[i].push(n);break}return 1===e.length?{type:"Polygon",coordinates:e[0]}:{type:"MultiPolygon",coordinates:e}}return null})(this.outer,this.inner),o&&(s.geometry=o,e.push(s))):this[""]&&(o=(t=>{let e=t?t.toStrings():[];return e.length>0?1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}:null})(this[""]),o&&(s.geometry=o,n.push(s)));for(let t of this.nodes)r=r.concat(t.toFeatureArray());return e.concat(n).concat(r)}}}})()},127465:t=>{t.exports=(()=>{"use strict";const t=t=>t[0],e=t=>t[t.length-1],n=t=>t.join(","),r=(t,e,n)=>{let r=t[e];r?r.push(n):t[e]=[n]},i=(t,e,n)=>{let r=t[e],i=null;r&&(i=r.indexOf(n))>=0&&r.splice(i,1)},o=(t,e)=>{let n=t[e];return n&&n.length>0?n[0]:null},s=r=>r.length>3&&n(t(r))===n(e(r)),a=(t,e,n)=>{e=e||0,n=n||1;let r=t.reduce(((n,r,i)=>t[n][e]>r[e]?n:i),0),i=r<=0?t.length-2:r-1,o=r>=t.length-1?1:r+1,s=t[i][e],a=t[r][e],l=t[o][e],u=t[i][n],f=t[r][n];return(a-s)*(t[o][n]-u)-(l-s)*(f-u)<0?"clockwise":"counterclockwise"},l=t=>t instanceof Array?t.map(l):parseFloat(t);class u extends Map{constructor(){super(),this.binders=[]}add(t,e){this.has(t)||this.set(t,e)}addBinder(t){this.binders.push(t)}bindAll(){this.binders.forEach((t=>t.bind()))}}return{purgeProps:(t,e)=>{if(t){let n=Object.assign({},t);if(e)for(let t of e)delete n[t];return n}return{}},mergeProps:(t,e)=>(t=t||{},e=e||{},Object.assign(t,e)),first:t,last:e,coordsToKey:n,addToMap:r,removeFromMap:i,getFirstFromMap:o,isRing:s,ringDirection:a,ptInsidePolygon:(t,e,n,r)=>{n=n||0,r=r||1;let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++)(e[o][n]<=t[n]&&t[n]<e[s][n]||e[s][n]<=t[n]&&t[n]<e[o][n])&&t[r]<(e[s][r]-e[o][r])*(t[n]-e[o][n])/(e[s][n]-e[o][n])+e[o][r]&&(i=!i);return i},strToFloat:l,RefElements:u,LateBinder:class{constructor(t,e,n,r){this.container=t,this.valueFunc=e,this.ctx=n,this.args=r}bind(){let t=this.valueFunc.apply(this.ctx,this.args);if(this.container instanceof Array){let e=this.container.indexOf(this);if(e>=0){let n=[e,1];t&&n.push(t),[].splice.apply(this.container,n)}}else if("object"==typeof this.container){let e=Object.keys(this.container).find((t=>this.container[t]===this));e&&(t?this.container[e]=t:delete this.container[e])}}},WayCollection:class extends Array{constructor(){super(),this.firstMap={},this.lastMap={}}addWay(i){(i=i.toCoordsArray()).length>0&&(this.push(i),r(this.firstMap,n(t(i)),i),r(this.lastMap,n(e(i)),i))}toStrings(){let r=[],s=null;for(;s=this.shift();){i(this.firstMap,n(t(s)),s),i(this.lastMap,n(e(s)),s);let a=s,u=null;do{let r=n(e(a)),s=!1;u=o(this.firstMap,r),u||(u=o(this.lastMap,r),s=!0),u&&(this.splice(this.indexOf(u),1),i(this.firstMap,n(t(u)),u),i(this.lastMap,n(e(u)),u),s&&(u.length>a.length&&([a,u]=[u,a]),u.reverse()),a=a.concat(u.slice(1)))}while(u);r.push(l(a))}return r}toRings(t){let e=this.toStrings(),n=[],r=null;for(;r=e.shift();)s(r)&&(a(r)!==t&&r.reverse(),n.push(r));return n}}}})()},249800:t=>{t.exports=(()=>{"use strict";function t(t){return null!=t.match(/^(.+?)\[(.+?)\]>$/g)}function e(t){let e=/^(.+?)\[(.+?)\]>$/g.exec(t);return e?{evt:e[1]+">",exp:e[2]}:{evt:t}}return class{constructor(t){t&&(this.queryParent=!!t.queryParent,this.progressive=t.progressive,this.queryParent&&(this.parentMap=new WeakMap)),this.evtListeners={}}parse(t,e,n){n=n?n+".":"";let r=/<([^ >\/]+)(.*?)>/gm,i=null,o=[];for(;i=r.exec(t);){let s=i[1],a={$tag:s},l=n+s,u=i[2].trim(),f=!1;(u.endsWith("/")||s.startsWith("?")||s.startsWith("!"))&&(f=!0);let c=/([^ ]+?)="(.+?)"/g,h=/([^ ]+?)='(.+?)'/g,p=null,d=!1;for(;p=c.exec(u);)d=!0,a[p[1]]=p[2];if(!d)for(;p=h.exec(u);)d=!0,a[p[1]]=p[2];if(d||""===u||(a.text=u),this.progressive&&this.emit(`<${l}>`,a,e),!f){let e=new RegExp(`([^]+?)</${s}>`,"g");e.lastIndex=r.lastIndex;let n=e.exec(t);if(n&&n[1]){r.lastIndex=e.lastIndex;let t=this.parse(n[1],a,l);t.length>0?a.$innerNodes=t:a.$innerText=n[1]}}this.queryParent&&e&&this.parentMap.set(a,e),this.progressive&&this.emit(`</${l}>`,a,e),o.push(a)}return o}getParent(t){return this.queryParent?this.parentMap.get(t):null}#t(t,e){let n=this.evtListeners[t];n?n.push(e):this.evtListeners[t]=[e]}addListener(n,r){t(n)&&(n=e(n),r.condition=function(t){let e="return "+t.replace(/(\$.+?)(?=[=!.])/g,"node.$&")+";";return new Function("node",e)}(n.exp),n=n.evt),this.#t(n,r)}#e(t,e){let n=this.evtListeners[t],r=null;n&&(r=n.indexOf(e))>=0&&n.splice(r,1)}removeListener(n,r){t(n)&&(n=(n=e(n)).evt),this.#e(n,r)}emit(t,...e){let n=this.evtListeners[t];if(n)for(let t of n)t.condition?!0===t.condition.apply(null,e)&&t.apply(null,e):t.apply(null,e)}on(t,e){this.addListener(t,e)}off(t,e){this.removeListener(t,e)}}})()},32404:(t,e,n)=>{"use strict";n.d(e,{IW:()=>p,V0:()=>l,aD:()=>s,i$:()=>a,jv:()=>f,tB:()=>o});var r=n(888344);function i(t){return(0,r.P2)(t,r.Vp)}function o(t){return t.length<3?0:Math.abs((0,r.Sm)(t.map((function(e,n){var r=t[n+1]||t[0];return e[0]*r[1]-r[0]*e[1]}))))/2}function s(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,s=a(t),l=s.minX,u=s.minY,f=s.maxX,c=s.maxY,h=n/(f-l),p=r/(c-u);return t.map((function(t){return[i+(t[0]-l)*h,o+(t[1]-u)*p]}))}function a(t){var e=t.map((function(t){return t[0]})),n=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,n),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,n)}}function l(t,e,n){var o=t[0],s=t[1],l=a(e),p=l.minX,d=l.maxX,g=[[p,s],[d,s]],m=u(g[0],g[1]),v=h(e),y=[];if(v.forEach((function(e){var n,r=u(e[0],e[1]),o=e[0];n=r,m.every((function(t,e){return 0===i(t-n[e])}))?y.push({pos:t,line:e,type:"line"}):c(f(m,r),[g,e]).forEach((function(t){e.some((function(e){return r=t,!i((n=e)[0]-r[0])&&!i(n[1]-r[1]);var n,r}))?y.push({pos:t,line:e,type:"point"}):0!==i(o[1]-s)&&y.push({pos:t,line:e,type:"intersection"})}))})),!n&&(0,r.sE)(y,(function(t){return t[0]===o})))return!0;var x=0,b={};return y.forEach((function(t){var e=t.pos,n=t.type,i=t.line;if(!(e[0]>o))if("intersection"===n)++x;else{if("line"===n)return;if("point"===n){var a=(0,r.sE)(i,(function(t){return t[1]!==s})),l=b[e[0]],u=a[1]>s?1:-1;l?l!==u&&++x:b[e[0]]=u}}})),x%2==1}function u(t,e){var n=t[0],i=t[1],o=e[0]-n,s=e[1]-i;Math.abs(o)<r.Vp&&(o=0),Math.abs(s)<r.Vp&&(s=0);var a=0,l=0,u=0;return o?s?(l=1,u=-(a=-s/o)*n-i):(l=1,u=-i):s&&(a=-1,u=n),[a,l,u]}function f(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],s=e[1],a=e[2],l=0===n&&0===o,u=0===r&&0===s,f=[];if(l&&u)return[];if(l){var c=-i/r;return c!==-a/s?[]:[[-1/0,c],[1/0,c]]}if(u){var h=-i/n;return h!==-a/o?[]:[[h,-1/0],[h,1/0]]}if(0===n)f=[[p=-(s*(d=-i/r)+a)/o,d]];else if(0===o)f=[[p=-(r*(d=-a/s)+i)/n,d]];else if(0===r)f=[[p=-i/n,d=-(o*p+a)/s]];else if(0===s)f=[[p=-a/o,d=-(n*p+i)/r]];else{var p,d;f=[[p=(r*a-s*i)/(s*n-r*o),d=-(n*p+i)/r]]}return f.map((function(t){return[t[0],t[1]]}))}function c(t,e){var n=e.map((function(t){return[0,1].map((function(e){return[Math.min(t[0][e],t[1][e]),Math.max(t[0][e],t[1][e])]}))})),r=[];if(2===t.length){var o=t[0],s=o[0],a=o[1];if(i(s-t[1][0])){if(!i(a-t[1][1])){var l=Math.max.apply(Math,n.map((function(t){return t[0][0]}))),u=Math.min.apply(Math,n.map((function(t){return t[0][1]})));if(i(l-u)>0)return[];r=[[l,a],[u,a]]}}else{var f=Math.max.apply(Math,n.map((function(t){return t[1][0]}))),c=Math.min.apply(Math,n.map((function(t){return t[1][1]})));if(i(f-c)>0)return[];r=[[s,f],[s,c]]}}return r.length||(r=t.filter((function(t){var e=t[0],r=t[1];return n.every((function(t){return 0<=i(e-t[0][0])&&0<=i(t[0][1]-e)&&0<=i(r-t[1][0])&&0<=i(t[1][1]-r)}))}))),r.map((function(t){return[i(t[0]),i(t[1])]}))}function h(t){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(t.slice(1),[t[0]]).map((function(e,n){return[t[n],e]}))}function p(t,e){var n=function(t,e){return function(t,e){var n=t.slice(),i=e.slice();-1===(0,r.c4)(n)&&n.reverse(),-1===(0,r.c4)(i)&&i.reverse();var o=h(n),s=h(i),a=o.map((function(t){return u(t[0],t[1])})),p=s.map((function(t){return u(t[0],t[1])})),d=[];a.forEach((function(t,e){var n=o[e],a=[];p.forEach((function(r,i){var o=c(f(t,r),[n,s[i]]);a.push.apply(a,o.map((function(t){return{index1:e,index2:i,pos:t,type:"intersection"}})))})),a.sort((function(t,e){return(0,r.zt)(n[0],t.pos)-(0,r.zt)(n[0],e.pos)})),d.push.apply(d,a),l(n[1],i)&&d.push({index1:e,index2:-1,pos:n[1],type:"inside"})})),s.forEach((function(t,e){if(l(t[1],n)){var i=!1,o=(0,r.cx)(d,(function(t){return t.index2===e?(i=!0,!1):!!i}));-1===o&&(i=!1,o=(0,r.cx)(d,(function(t){var n=t.index1,r=t.index2;return-1===n&&r+1===e?(i=!0,!1):!!i}))),-1===o?d.push({index1:-1,index2:e,pos:t[1],type:"inside"}):d.splice(o,0,{index1:-1,index2:e,pos:t[1],type:"inside"})}}));var g={};return d.filter((function(t){var e=t.pos,n=e[0]+"x"+e[1];return!g[n]&&(g[n]=!0,!0)}))}(t,e).map((function(t){return t.pos}))}(t,e);return o(n)}},911895:t=>{t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=(r-n)/2,l=0,u=a-1;l<a;u=l++){var f=e[n+2*l+0],c=e[n+2*l+1],h=e[n+2*u+0],p=e[n+2*u+1];c>o!=p>o&&i<(h-f)*(o-c)/(p-c)+f&&(s=!s)}return s}},326960:(t,e,n)=>{var r=n(911895),i=n(488139);t.exports=function(t,e,n,o){return e.length>0&&Array.isArray(e[0])?i(t,e,n,o):r(t,e,n,o)},t.exports.nested=i,t.exports.flat=r},488139:t=>{t.exports=function(t,e,n,r){var i=t[0],o=t[1],s=!1;void 0===n&&(n=0),void 0===r&&(r=e.length);for(var a=r-n,l=0,u=a-1;l<a;u=l++){var f=e[l+n][0],c=e[l+n][1],h=e[u+n][0],p=e[u+n][1];c>o!=p>o&&i<(h-f)*(o-c)/(p-c)+f&&(s=!s)}return s}},832676:function(t,e,n){var r=n(734155);t.exports=function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}var i=function(t,e){this.next=null,this.key=t,this.data=e,this.left=null,this.right=null};function o(t,e){return t>e?1:t<e?-1:0}function s(t,e,n){for(var r=new i(null,null),o=r,s=r;;){var a=n(t,e.key);if(a<0){if(null===e.left)break;if(n(t,e.left.key)<0){var l=e.left;if(e.left=l.right,l.right=e,null===(e=l).left)break}s.left=e,s=e,e=e.left}else{if(!(a>0))break;if(null===e.right)break;if(n(t,e.right.key)>0&&(l=e.right,e.right=l.left,l.left=e,null===(e=l).right))break;o.right=e,o=e,e=e.right}}return o.right=e.left,s.left=e.right,e.left=r.right,e.right=r.left,e}function a(t,e,n,r){var o=new i(t,e);if(null===n)return o.left=o.right=null,o;var a=r(t,(n=s(t,n,r)).key);return a<0?(o.left=n.left,o.right=n,n.left=null):a>=0&&(o.right=n.right,o.left=n,n.right=null),o}function l(t,e,n){var r=null,i=null;if(e){var o=n((e=s(t,e,n)).key,t);0===o?(r=e.left,i=e.right):o<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function u(t,e,n,r,i){if(t){r(e+(n?"â””â”€â”€ ":"â”œâ”€â”€ ")+i(t)+"\n");var o=e+(n?"    ":"â”‚   ");t.left&&u(t.left,o,!1,r,i),t.right&&u(t.right,o,!0,r,i)}}var f=function(){function t(t){void 0===t&&(t=o),this._root=null,this._size=0,this._comparator=t}return t.prototype.insert=function(t,e){return this._size++,this._root=a(t,e,this._root,this._comparator)},t.prototype.add=function(t,e){var n=new i(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var r=this._comparator,o=s(t,this._root,r),a=r(t,o.key);return 0===a?this._root=o:(a<0?(n.left=o.left,n.right=o,o.left=null):a>0&&(n.right=o.right,n.left=o,o.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},t.prototype._remove=function(t,e,n){var r;return null===e?null:0===n(t,(e=s(t,e,n)).key)?(null===e.left?r=e.right:(r=s(t,e.left,n)).right=e.right,this._size--,r):e},t.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=s(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},t.prototype.findStatic=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return e;e=r<0?e.left:e.right}return null},t.prototype.find=function(t){return this._root&&(this._root=s(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},t.prototype.contains=function(t){for(var e=this._root,n=this._comparator;e;){var r=n(t,e.key);if(0===r)return!0;e=r<0?e.left:e.right}return!1},t.prototype.forEach=function(t,e){for(var n=this._root,r=[],i=!1;!i;)null!==n?(r.push(n),n=n.left):0!==r.length?(n=r.pop(),t.call(e,n),n=n.right):i=!0;return this},t.prototype.range=function(t,e,n,r){for(var i=[],o=this._comparator,s=this._root;0!==i.length||s;)if(s)i.push(s),s=s.left;else{if(o((s=i.pop()).key,e)>0)break;if(o(s.key,t)>=0&&n.call(r,s))return this;s=s.right}return this},t.prototype.keys=function(){var t=[];return this.forEach((function(e){var n=e.key;return t.push(n)})),t},t.prototype.values=function(){var t=[];return this.forEach((function(e){var n=e.data;return t.push(n)})),t},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},t.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},t.prototype.at=function(t){for(var e=this._root,n=!1,r=0,i=[];!n;)if(e)i.push(e),e=e.left;else if(i.length>0){if(e=i.pop(),r===t)return e;r++,e=e.right}else n=!0;return null},t.prototype.next=function(t){var e=this._root,n=null;if(t.right){for(n=t.right;n.left;)n=n.left;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?(n=e,e=e.left):e=e.right}return n},t.prototype.prev=function(t){var e=this._root,n=null;if(null!==t.left){for(n=t.left;n.right;)n=n.right;return n}for(var r=this._comparator;e;){var i=r(t.key,e.key);if(0===i)break;i<0?e=e.left:(n=e,e=e.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return function(t){for(var e=t,n=[],r=!1,o=new i(null,null),s=o;!r;)e?(n.push(e),e=e.left):n.length>0?e=(e=s=s.next=n.pop()).right:r=!0;return s.next=null,o.next}(this._root)},t.prototype.load=function(t,e,n){void 0===e&&(e=[]),void 0===n&&(n=!1);var r=t.length,o=this._comparator;if(n&&p(t,e,0,r-1,o),null===this._root)this._root=c(t,e,0,r),this._size=r;else{var s=function(t,e,n){for(var r=new i(null,null),o=r,s=t,a=e;null!==s&&null!==a;)n(s.key,a.key)<0?(o.next=s,s=s.next):(o.next=a,a=a.next),o=o.next;return null!==s?o.next=s:null!==a&&(o.next=a),r.next}(this.toList(),function(t,e){for(var n=new i(null,null),r=n,o=0;o<t.length;o++)r=r.next=new i(t[o],e[o]);return r.next=null,n.next}(t,e),o);r=this._size+r,this._root=h({head:s},0,r)}return this},t.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var e=[];return u(this._root,"",!0,(function(t){return e.push(t)}),t),e.join("")},t.prototype.update=function(t,e,n){var r=this._comparator,i=l(t,this._root,r),o=i.left,u=i.right;r(t,e)<0?u=a(e,n,u,r):o=a(e,n,o,r),this._root=function(t,e,n){return null===e?t:(null===t||((e=s(t.key,e,n)).left=t),e)}(o,u,r)},t.prototype.split=function(t){return l(t,this._root,this._comparator)},t}();function c(t,e,n,r){var o=r-n;if(o>0){var s=n+Math.floor(o/2),a=t[s],l=e[s],u=new i(a,l);return u.left=c(t,e,n,s),u.right=c(t,e,s+1,r),u}return null}function h(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),o=h(t,e,i),s=t.head;return s.left=o,t.head=t.head.next,s.right=h(t,i+1,n),s}return null}function p(t,e,n,r,i){if(!(n>=r)){for(var o=t[n+r>>1],s=n-1,a=r+1;;){do{s++}while(i(t[s],o)<0);do{a--}while(i(t[a],o)>0);if(s>=a)break;var l=t[s];t[s]=t[a],t[a]=l,l=e[s],e[s]=e[a],e[a]=l}p(t,e,n,a,i),p(t,e,a+1,r,i)}}var d=function(t,e){return t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y},g=function(t,e){if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;var n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x;return{ll:{x:n,y:t.ll.y<e.ll.y?e.ll.y:t.ll.y},ur:{x:r,y:t.ur.y<e.ur.y?t.ur.y:e.ur.y}}},m=Number.EPSILON;void 0===m&&(m=Math.pow(2,-52));var v=m*m,y=function(t,e){if(-m<t&&t<m&&-m<e&&e<m)return 0;var n=t-e;return n*n<v*t*e?0:t<e?-1:1},x=function(){function e(){t(this,e),this.reset()}return n(e,[{key:"reset",value:function(){this.xRounder=new b,this.yRounder=new b}},{key:"round",value:function(t,e){return{x:this.xRounder.round(t),y:this.yRounder.round(e)}}}]),e}(),b=function(){function e(){t(this,e),this.tree=new f,this.round(0)}return n(e,[{key:"round",value:function(t){var e=this.tree.add(t),n=this.tree.prev(e);if(null!==n&&0===y(e.key,n.key))return this.tree.remove(t),n.key;var r=this.tree.next(e);return null!==r&&0===y(e.key,r.key)?(this.tree.remove(t),r.key):t}}]),e}(),w=new x,E=function(t,e){return t.x*e.y-t.y*e.x},_=function(t,e){return t.x*e.x+t.y*e.y},S=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y},o=E(r,i);return y(o,0)},k=function(t){return Math.sqrt(_(t,t))},O=function(t,e,n){var r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return _(i,r)/k(i)/k(r)},L=function(t,e,n){return 0===e.y?null:{x:t.x+e.x/e.y*(n-t.y),y:n}},T=function(t,e,n){return 0===e.x?null:{x:n,y:t.y+e.y/e.x*(n-t.x)}},P=function(){function e(n,r){t(this,e),void 0===n.events?n.events=[this]:n.events.push(this),this.point=n,this.isLeft=r}return n(e,null,[{key:"compare",value:function(t,n){var r=e.comparePoints(t.point,n.point);return 0!==r?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:I.compare(t.segment,n.segment))}},{key:"comparePoints",value:function(t,e){return t.x<e.x?-1:t.x>e.x?1:t.y<e.y?-1:t.y>e.y?1:0}}]),n(e,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var e=t.point.events,n=0,r=e.length;n<r;n++){var i=e[n];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,e=0;e<t;e++){var n=this.point.events[e];if(void 0===n.segment.consumedBy)for(var r=e+1;r<t;r++){var i=this.point.events[r];void 0===i.consumedBy&&n.otherSE.point.events===i.otherSE.point.events&&n.segment.consume(i.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],e=0,n=this.point.events.length;e<n;e++){var r=this.point.events[e];r!==this&&!r.segment.ringOut&&r.segment.isInResult()&&t.push(r)}return t}},{key:"getLeftmostComparator",value:function(t){var e=this,n=new Map,r=function(r){var i,o,s,a,l,u=r.otherSE;n.set(r,{sine:(i=e.point,o=t.point,s=u.point,a={x:o.x-i.x,y:o.y-i.y},l={x:s.x-i.x,y:s.y-i.y},E(l,a)/k(l)/k(a)),cosine:O(e.point,t.point,u.point)})};return function(t,e){n.has(t)||r(t),n.has(e)||r(e);var i=n.get(t),o=i.sine,s=i.cosine,a=n.get(e),l=a.sine,u=a.cosine;return o>=0&&l>=0?s<u?1:s>u?-1:0:o<0&&l<0?s<u?-1:s>u?1:0:l<o?-1:l>o?1:0}}}]),e}(),R=0,I=function(){function e(n,r,i,o){t(this,e),this.id=++R,this.leftSE=n,n.segment=this,n.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=n,this.rings=i,this.windings=o}return n(e,null,[{key:"compare",value:function(t,e){var n=t.leftSE.point.x,r=e.leftSE.point.x,i=t.rightSE.point.x,o=e.rightSE.point.x;if(o<n)return 1;if(i<r)return-1;var s=t.leftSE.point.y,a=e.leftSE.point.y,l=t.rightSE.point.y,u=e.rightSE.point.y;if(n<r){if(a<s&&a<l)return 1;if(a>s&&a>l)return-1;var f=t.comparePoint(e.leftSE.point);if(f<0)return 1;if(f>0)return-1;var c=e.comparePoint(t.rightSE.point);return 0!==c?c:-1}if(n>r){if(s<a&&s<u)return-1;if(s>a&&s>u)return 1;var h=e.comparePoint(t.leftSE.point);if(0!==h)return h;var p=t.comparePoint(e.rightSE.point);return p<0?1:p>0?-1:1}if(s<a)return-1;if(s>a)return 1;if(i<o){var d=e.comparePoint(t.rightSE.point);if(0!==d)return d}if(i>o){var g=t.comparePoint(e.rightSE.point);if(g<0)return 1;if(g>0)return-1}if(i!==o){var m=l-s,v=i-n,y=u-a,x=o-r;if(m>v&&y<x)return 1;if(m<v&&y>x)return-1}return i>o?1:i<o||l<u?-1:l>u?1:t.id<e.id?-1:t.id>e.id?1:0}}]),n(e,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,e=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<e?t:e},ur:{x:this.rightSE.point.x,y:t>e?t:e}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var e=this.leftSE.point,n=this.rightSE.point,r=this.vector();if(e.x===n.x)return t.x===e.x?0:t.x<e.x?1:-1;var i=(t.y-e.y)/r.y,o=e.x+i*r.x;if(t.x===o)return 0;var s=(t.x-e.x)/r.x,a=e.y+s*r.y;return t.y===a?0:t.y<a?-1:1}},{key:"getIntersection",value:function(t){var e=this.bbox(),n=t.bbox(),r=g(e,n);if(null===r)return null;var i=this.leftSE.point,o=this.rightSE.point,s=t.leftSE.point,a=t.rightSE.point,l=d(e,s)&&0===this.comparePoint(s),u=d(n,i)&&0===t.comparePoint(i),f=d(e,a)&&0===this.comparePoint(a),c=d(n,o)&&0===t.comparePoint(o);if(u&&l)return c&&!f?o:!c&&f?a:null;if(u)return f&&i.x===a.x&&i.y===a.y?null:i;if(l)return c&&o.x===s.x&&o.y===s.y?null:s;if(c&&f)return null;if(c)return o;if(f)return a;var h=function(t,e,n,r){if(0===e.x)return T(n,r,t.x);if(0===r.x)return T(t,e,n.x);if(0===e.y)return L(n,r,t.y);if(0===r.y)return L(t,e,n.y);var i=E(e,r);if(0==i)return null;var o={x:n.x-t.x,y:n.y-t.y},s=E(o,e)/i,a=E(o,r)/i;return{x:(t.x+a*e.x+(n.x+s*r.x))/2,y:(t.y+a*e.y+(n.y+s*r.y))/2}}(i,this.vector(),s,t.vector());return null===h?null:d(r,h)?w.round(h.x,h.y):null}},{key:"split",value:function(t){var n=[],r=void 0!==t.events,i=new P(t,!0),o=new P(t,!1),s=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);var a=new e(i,s,this.rings.slice(),this.windings.slice());return P.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),P.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var e=0,n=this.windings.length;e<n;e++)this.windings[e]*=-1}},{key:"consume",value:function(t){for(var n=this,r=t;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;var i=e.compare(n,r);if(0!==i){if(i>0){var o=n;n=r,r=o}if(n.prev===r){var s=n;n=r,r=s}for(var a=0,l=r.rings.length;a<l;a++){var u=r.rings[a],f=r.windings[a],c=n.rings.indexOf(u);-1===c?(n.rings.push(u),n.windings.push(f)):n.windings[c]+=f}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return void 0!==this._prevInResult||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(void 0!==this._beforeState)return this._beforeState;if(this.prev){var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(void 0!==this._afterState)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var e=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys,i=0,o=this.rings.length;i<o;i++){var s=this.rings[i],a=this.windings[i],l=e.indexOf(s);-1===l?(e.push(s),n.push(a)):n[l]+=a}for(var u=[],f=[],c=0,h=e.length;c<h;c++)if(0!==n[c]){var p=e[c],d=p.poly;if(-1===f.indexOf(d))if(p.isExterior)u.push(d);else{-1===f.indexOf(d)&&f.push(d);var g=u.indexOf(p.poly);-1!==g&&u.splice(g,1)}}for(var m=0,v=u.length;m<v;m++){var y=u[m].multiPoly;-1===r.indexOf(y)&&r.push(y)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(void 0!==this._isInResult)return this._isInResult;var t=this.beforeState().multiPolys,e=this.afterState().multiPolys;switch(z.type){case"union":var n=0===t.length,r=0===e.length;this._isInResult=n!==r;break;case"intersection":var i,o;t.length<e.length?(i=t.length,o=e.length):(i=e.length,o=t.length),this._isInResult=o===z.numMultiPolys&&i<o;break;case"xor":var s=Math.abs(t.length-e.length);this._isInResult=s%2==1;break;case"difference":var a=function(t){return 1===t.length&&t[0].isSubject};this._isInResult=a(t)!==a(e);break;default:throw new Error("Unrecognized operation type found ".concat(z.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,n,r){var i,o,s,a=P.comparePoints(t,n);if(a<0)i=t,o=n,s=1;else{if(!(a>0))throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));i=n,o=t,s=-1}return new e(new P(i,!0),new P(o,!1),[r],[s])}}]),e}(),A=function(){function e(n,r,i){if(t(this,e),!Array.isArray(n)||0===n.length)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=i,this.segments=[],"number"!=typeof n[0][0]||"number"!=typeof n[0][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=w.round(n[0][0],n[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var s=o,a=1,l=n.length;a<l;a++){if("number"!=typeof n[a][0]||"number"!=typeof n[a][1])throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var u=w.round(n[a][0],n[a][1]);u.x===s.x&&u.y===s.y||(this.segments.push(I.fromRing(s,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),s=u)}o.x===s.x&&o.y===s.y||this.segments.push(I.fromRing(s,o,this))}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.segments.length;e<n;e++){var r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}}]),e}(),M=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new A(n[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var i=1,o=n.length;i<o;i++){var s=new A(n[i],this,!1);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.interiorRings.push(s)}this.multiPoly=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),e=0,n=this.interiorRings.length;e<n;e++)for(var r=this.interiorRings[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),j=function(){function e(n,r){if(t(this,e),!Array.isArray(n))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{"number"==typeof n[0][0][0]&&(n=[n])}catch(t){}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var i=0,o=n.length;i<o;i++){var s=new M(n[i],this);s.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=s.bbox.ll.x),s.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=s.bbox.ll.y),s.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=s.bbox.ur.x),s.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=s.bbox.ur.y),this.polys.push(s)}this.isSubject=r}return n(e,[{key:"getSweepEvents",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++)for(var r=this.polys[e].getSweepEvents(),i=0,o=r.length;i<o;i++)t.push(r[i]);return t}}]),e}(),C=function(){function e(n){t(this,e),this.events=n;for(var r=0,i=n.length;r<i;r++)n[r].segment.ringOut=this;this.poly=null}return n(e,null,[{key:"factory",value:function(t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];if(o.isInResult()&&!o.ringOut){for(var s=null,a=o.leftSE,l=o.rightSE,u=[a],f=a.point,c=[];s=a,a=l,u.push(a),a.point!==f;)for(;;){var h=a.getAvailableLinkedEvents();if(0===h.length){var p=u[0].point,d=u[u.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(d.x,", ").concat(d.y,"]."))}if(1===h.length){l=h[0].otherSE;break}for(var g=null,m=0,v=c.length;m<v;m++)if(c[m].point===a.point){g=m;break}if(null===g){c.push({index:u.length,point:a.point});var y=a.getLeftmostComparator(s);l=h.sort(y)[0].otherSE;break}var x=c.splice(g)[0],b=u.splice(x.index);b.unshift(b[0].otherSE),n.push(new e(b.reverse()))}n.push(new e(u))}}return n}}]),n(e,[{key:"getGeom",value:function(){for(var t=this.events[0].point,e=[t],n=1,r=this.events.length-1;n<r;n++){var i=this.events[n].point,o=this.events[n+1].point;0!==S(i,t,o)&&(e.push(i),t=i)}if(1===e.length)return null;var s=e[0],a=e[1];0===S(s,t,a)&&e.shift(),e.push(e[0]);for(var l=this.isExteriorRing()?1:-1,u=this.isExteriorRing()?0:e.length-1,f=this.isExteriorRing()?e.length:-1,c=[],h=u;h!=f;h+=l)c.push([e[h].x,e[h].y]);return c}},{key:"isExteriorRing",value:function(){if(void 0===this._isExteriorRing){var t=this.enclosingRing();this._isExteriorRing=!t||!t.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return void 0===this._enclosingRing&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],e=1,n=this.events.length;e<n;e++){var r=this.events[e];P.compare(t,r)>0&&(t=r)}for(var i=t.segment.prevInResult(),o=i?i.prevInResult():null;;){if(!i)return null;if(!o)return i.ringOut;if(o.ringOut!==i.ringOut)return o.ringOut.enclosingRing()!==i.ringOut?i.ringOut:i.ringOut.enclosingRing();i=o.prevInResult(),o=i?i.prevInResult():null}}}]),e}(),N=function(){function e(n){t(this,e),this.exteriorRing=n,n.poly=this,this.interiorRings=[]}return n(e,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(null===t[0])return null;for(var e=0,n=this.interiorRings.length;e<n;e++){var r=this.interiorRings[e].getGeom();null!==r&&t.push(r)}return t}}]),e}(),B=function(){function e(n){t(this,e),this.rings=n,this.polys=this._composePolys(n)}return n(e,[{key:"getGeom",value:function(){for(var t=[],e=0,n=this.polys.length;e<n;e++){var r=this.polys[e].getGeom();null!==r&&t.push(r)}return t}},{key:"_composePolys",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];if(!i.poly)if(i.isExteriorRing())e.push(new N(i));else{var o=i.enclosingRing();o.poly||e.push(new N(o)),o.poly.addInterior(i)}}return e}}]),e}(),F=function(){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I.compare;t(this,e),this.queue=n,this.tree=new f(r),this.segments=[]}return n(e,[{key:"process",value:function(t){var e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(e),n;var r=t.isLeft?this.tree.insert(e):this.tree.find(e);if(!r)throw new Error("Unable to find segment #".concat(e.id," ")+"[".concat(e.leftSE.point.x,", ").concat(e.leftSE.point.y,"] -> ")+"[".concat(e.rightSE.point.x,", ").concat(e.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var i=r,o=r,s=void 0,a=void 0;void 0===s;)null===(i=this.tree.prev(i))?s=null:void 0===i.key.consumedBy&&(s=i.key);for(;void 0===a;)null===(o=this.tree.next(o))?a=null:void 0===o.key.consumedBy&&(a=o.key);if(t.isLeft){var l=null;if(s){var u=s.getIntersection(e);if(null!==u&&(e.isAnEndpoint(u)||(l=u),!s.isAnEndpoint(u)))for(var f=this._splitSafely(s,u),c=0,h=f.length;c<h;c++)n.push(f[c])}var p=null;if(a){var d=a.getIntersection(e);if(null!==d&&(e.isAnEndpoint(d)||(p=d),!a.isAnEndpoint(d)))for(var g=this._splitSafely(a,d),m=0,v=g.length;m<v;m++)n.push(g[m])}if(null!==l||null!==p){var y;y=null===l?p:null===p||P.comparePoints(l,p)<=0?l:p,this.queue.remove(e.rightSE),n.push(e.rightSE);for(var x=e.split(y),b=0,w=x.length;b<w;b++)n.push(x[b])}n.length>0?(this.tree.remove(e),n.push(t)):(this.segments.push(e),e.prev=s)}else{if(s&&a){var E=s.getIntersection(a);if(null!==E){if(!s.isAnEndpoint(E))for(var _=this._splitSafely(s,E),S=0,k=_.length;S<k;S++)n.push(_[S]);if(!a.isAnEndpoint(E))for(var O=this._splitSafely(a,E),L=0,T=O.length;L<T;L++)n.push(O[L])}}this.tree.remove(e)}return n}},{key:"_splitSafely",value:function(t,e){this.tree.remove(t);var n=t.rightSE;this.queue.remove(n);var r=t.split(e);return r.push(n),void 0===t.consumedBy&&this.tree.insert(t),r}}]),e}(),W=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,D=void 0!==r&&r.env.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,z=new(function(){function e(){t(this,e)}return n(e,[{key:"run",value:function(t,e,n){z.type=t,w.reset();for(var r=[new j(e,!0)],i=0,o=n.length;i<o;i++)r.push(new j(n[i],!1));if(z.numMultiPolys=r.length,"difference"===z.type)for(var s=r[0],a=1;a<r.length;)null!==g(r[a].bbox,s.bbox)?a++:r.splice(a,1);if("intersection"===z.type)for(var l=0,u=r.length;l<u;l++)for(var c=r[l],h=l+1,p=r.length;h<p;h++)if(null===g(c.bbox,r[h].bbox))return[];for(var d=new f(P.compare),m=0,v=r.length;m<v;m++)for(var y=r[m].getSweepEvents(),x=0,b=y.length;x<b;x++)if(d.insert(y[x]),d.size>W)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var E=new F(d),_=d.size,S=d.pop();S;){var k=S.key;if(d.size===_){var O=k.segment;throw new Error("Unable to pop() ".concat(k.isLeft?"left":"right"," SweepEvent ")+"[".concat(k.point.x,", ").concat(k.point.y,"] from segment #").concat(O.id," ")+"[".concat(O.leftSE.point.x,", ").concat(O.leftSE.point.y,"] -> ")+"[".concat(O.rightSE.point.x,", ").concat(O.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(d.size>W)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(E.segments.length>D)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var L=E.process(k),T=0,R=L.length;T<R;T++){var I=L[T];void 0===I.consumedBy&&d.insert(I)}_=d.size,S=d.pop()}w.reset();var A=C.factory(E.segments);return new B(A).getGeom()}}]),e}());return{union:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return z.run("union",t,n)},intersection:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return z.run("intersection",t,n)},xor:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return z.run("xor",t,n)},difference:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return z.run("difference",t,n)}}}()},734155:t=>{var e,n,r=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var a,l=[],u=!1,f=-1;function c(){u&&a&&(u=!1,a.length?l=a.concat(l):f=-1,l.length&&h())}function h(){if(!u){var t=s(c);u=!0;for(var e=l.length;e;){for(a=l,l=[];++f<e;)a&&a[f].run();f=-1,e=l.length}a=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{return n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||u||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=d,r.addListener=d,r.once=d,r.off=d,r.removeListener=d,r.removeAllListeners=d,r.emit=d,r.prependListener=d,r.prependOnceListener=d,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},742111:(t,e,n)=>{"use strict";n(521105)()},210138:(t,e,n)=>{"use strict";n(888118)();var r=n(659862),i=n(58294),o=n(198330),s=n(214770),a=n(340210),l=n(155559),u=l(a("%Promise.all%")),f=l(a("%Promise.reject%"));t.exports=function(t){var e=this;if("Object"!==i(e))throw new TypeError("`this` value must be an object");var n=o(t);return u(e,s(n,(function(t){var n=r(e,t);try{return n.then((function(t){return{status:"fulfilled",value:t}}),(function(t){return{status:"rejected",reason:t}}))}catch(t){return f(e,t)}})))}},792295:(t,e,n)=>{"use strict";var r=n(888118),i=n(210138);t.exports=function(){return r(),"function"==typeof Promise.allSettled?Promise.allSettled:i}},888118:t=>{"use strict";t.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.allSettled` requires a global `Promise` be available.")}},521105:(t,e,n)=>{"use strict";var r=n(888118),i=n(792295),o=n(404289);t.exports=function(){r();var t=i();return o(Promise,{allSettled:t},{allSettled:function(){return Promise.allSettled!==t}}),t}},558650:(t,e,n)=>{"use strict";n(513547)()},788385:(t,e,n)=>{"use strict";n(77971)();var r=n(340210)("%TypeError%"),i=n(659862),o=n(841546),s=n(298100),a=n(58294),l=n(958052),u=Promise;t.exports=l((function(t){var e=this;if("Object"!==a(e))throw new r("receiver is not an Object");var n=s(e,u),l=t,f=t;return o(t)&&(l=function(t,e){return function(n){var r=e();return i(t,r).then((function(){return n}))}}(n,t),f=function(t,e){return function(n){var r=e();return i(t,r).then((function(){throw n}))}}(n,t)),e.then(l,f)}),"finally",!0)},618076:(t,e,n)=>{"use strict";var r=n(77971),i=n(788385);t.exports=function(){return r(),"function"==typeof Promise.prototype.finally?Promise.prototype.finally:i}},77971:t=>{"use strict";t.exports=function(){if("function"!=typeof Promise)throw new TypeError("`Promise.prototype.finally` requires a global `Promise` be available.")}},513547:(t,e,n)=>{"use strict";var r=n(77971),i=n(618076),o=n(404289);t.exports=function(){r();var t=i();return o(Promise.prototype,{finally:t},{finally:function(){return Promise.prototype.finally!==t}}),t}},892703:(t,e,n)=>{"use strict";var r=n(150414);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},45697:(t,e,n)=>{t.exports=n(892703)()},150414:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},110221:t=>{"use strict";t.exports=JSON.parse('{"building":{},"highway":{"whitelist":["services","rest_area","escape","elevator"]},"natural":{"blacklist":["coastline","cliff","ridge","arete","tree_row"]},"landuse":{},"waterway":{"whitelist":["riverbank","dock","boatyard","dam"]},"amenity":{},"leisure":{},"barrier":{"whitelist":["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},"railway":{"whitelist":["station","turntable","roundhouse","platform"]},"area":{},"boundary":{},"man_made":{"blacklist":["cutline","embankment","pipeline"]},"power":{"whitelist":["plant","substation","generator","transformer"]},"place":{},"shop":{},"aeroway":{"blacklist":["taxiway"]},"tourism":{},"historic":{},"public_transport":{},"office":{},"building:part":{},"military":{},"ruins":{},"area:highway":{},"craft":{},"golf":{},"indoor":{}}')}}]);